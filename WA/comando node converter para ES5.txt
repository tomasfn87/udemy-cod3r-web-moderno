2022-06-22
tsc --allowJs -t es5 source_file.js --outFile target_file.js
tsc --allowJs -t es5 source_file.js --outFile target_file.js --outDir ./es5

2022-06-23
Exemplo - conversão de arquivo .js > ES5 para ES5 usando tsc, TypeScript compiler

* Para poder escrever Js na versão atual e então converter de uma
versão > ES5 para ES5, para uso no GTM --> variáveis do GTM devem
estar entre aspas simples ou duplas ('{{myVar1}}' ou "{{myVar2}}")
 
- Comando para copiar (Node Prompt - DOS/cmd.exe):
tsc --allowJs -t es5 ".\20220621-ecoisademenino_posts_acao somente links.js" --outDir .\es5

- Explicação Comando (Node Prompt - DOS/cmd.exe):
tsc                                                                                          --> TypeScript compiler - checar se está instalado: tsc -v, instalar: npm i --location=global tsc
  --allowJs                                                                                  --> permite o uso de arquivos .js (normalmente apenas .ts)
  -t es5                                                                                     --> versao do ECMA Script do arquivo de saída
  ".\20220621-ecoisademenino_posts_acao somente links.js"                                    --> arquivo de origem
  --outDir .\es5                                                                             --> pasta de saída, para não substituir o arquivo original


* Depois de gerado o arquivo na versão ES5, é preciso rodar o script
para remover as aspas simples ou duplas perto de '{{' ou '}}' e fazer
o arquivo ficar quebrado no contexto node.js, mas no formato aceito
pelo GTM:
 
- Comando para copiar (Node Prompt - DOS/cmd.exe):
node remove_quote_near_double_curly_brackets.js "Apsen - ecoisademenino\es5\20220621-ecoisademenino_posts_acao somente links.js" "Apsen - ecoisademenino\es5\clean\20220621-ecoisademenino_posts_acao somente links.js"

- Explicação Comando (Node Prompt - DOS/cmd.exe):
node                                                                                         --> node 
  remove_quote_near_double_curly_brackets.js                                                 --> o script de limpeza
  "Apsen - ecoisademenino\es5\20220621-ecoisademenino_posts_acao somente links.js"           --> arquivo de origem, a remover ' ou " perto de {{ ou }}
  "Apsen - ecoisademenino\es5\clean\20220621-ecoisademenino_posts_acao somente links.js"     --> arquivo alvo, onde será salvo o resultado da operação
